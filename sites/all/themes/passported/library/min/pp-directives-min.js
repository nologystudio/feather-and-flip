"use strict";var ppComponents=angular.module("ppComponents",[]),ppTools=angular.module("ppTools",[]);ppComponents.directive("ppFilter",function(){return{restrict:"EA",replace:!1,scope:{state:"=filterState"},controller:function(t,e){t.filter=function(e,i){var n=i.split(" "),o=e?$("#hotel-block article.hotel"):$("#guide li.address-book");o.each(function(){var e=$(this),i=!0;switch(_.map(n,function(t){i&&(i=e.hasClass(t))}),t.state){case!0:i?e.show():e.hide();break;case!1:e.show()}})}},link:function(t,e,i){t.state&&e.find("span").addClass("on"),e.on("click",function(){$(this).find("span").toggleClass("on"),t.state=!t.state,t.filter(e.hasClass("hotel"),i.filters)})}}}),ppComponents.directive("ppPromotedItinerary",function(){return{restrict:"EA",replace:!0,scope:{itinerary:"@"},template:'<a href="{{itinerary.url}}"><figure><img ng-src="{{itinerary.primary_image.small_itinerary.url}}"/></figure><footer><h4>{{itinerary.name}}</h4></footer></a>',controller:function(t,e){t.getItinerary=function(i){var n=e("https://go.passported.com/api/v2/itinerary");n.get({id:i},function(e){_.isNull(e.itinerary)?console.log(e):t.itinerary=e.itinerary})}},link:function(t,e,i){t.getItinerary(i.id)}}}),ppComponents.directive("ppHotelGallery",function(){return{restrict:"EA",replace:!1,controller:function(t){},link:function(t,e,i){var n=e.find('*[rel="left"]'),o=e.find('*[rel="right"]');setTimeout(function(){e.imagesLoaded(function(t){e.sly({horizontal:!0,itemNav:"basic",activateOn:"click",mouseDragging:1,touchDragging:1,smart:1,startAt:0,scrollBy:1,speed:300,elasticBounds:1,activatePageOn:"click",prevPage:n,nextPage:o}),e.transition({opacity:1})})},500)}}}),ppComponents.directive("ppSocialMediaLink",function(){return{restrict:"A",replace:!1,scope:{media:"=ppSocialMediaImage",description:"=ppSocialMediaDesc"},link:function(t,e,i){var n=host+window.location.pathname;switch(i.rel){case"facebook":i.$set("href","http://www.facebook.com/sharer.php?u="+n);break;case"twitter":i.$set("href","https://twitter.com/share?url="+n);break;case"pinterest":i.$set("href","http://pinterest.com/pin/create/button/?url="+n+"&media="+t.media+"&description="+t.description);break;case"google-plus":i.$set("href","https://plus.google.com/share?url="+n);break;case"mail":}}}}),ppComponents.directive("ppInspirationSelect",function(){return{restrict:"EA",replace:!1,controller:function(t,e){t.setChoice=function(e,i){switch(e){case"place-select":t.search.place=i;break;case"season-select":t.search.season=i}t.$apply()}},link:function(t,e,i){var n=e.data("options").split("|"),o='<ul id="options"></ul>',a=!1,r,s=function(){e.append(o),r=e.find("#options"),_.map(n,function(t){r.append('<li data-value="'+t+'">'+t+"</li>")})},c={global:function(){e.on("click",function(){r.show().transition({opacity:1},"fast"),$(this).unbind("click"),setTimeout(function(){r.transition({opacity:0},"fast",function(){r.hide(),c.global()})},3e3)})},list:function(){r.find("li").on("click",function(){e.find("h5").text($(this).data("value")),t.setChoice(i.id,$(this).data("value")),r.transition({opacity:0},"fast",function(){r.hide(),c.global()})})},close:function(){}};s(),c.global(),c.list()}}});