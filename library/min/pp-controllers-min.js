"use strict";var formSubmit="https://stage.passported.com/api/forms",ppControllers=angular.module("ppControllers",[]);ppControllers.controller("AppController",function(a,n,t,e){var o=function(a){},i=function(){$("body > header").waypoint(function(){var a=$(this);t(function(){a.find('*[data-animate="1"]').addClass("animated fadeInDown")},200),t(function(){a.find('*[data-animate="2"]').addClass("animated fadeInDown")},400),t(function(){a.find('*[data-animate="3"]').addClass("animated fadeInDown")},600),t(function(){a.find('*[data-animate="4"]').addClass("animated fadeInDown")},800),t(function(){a.find('*[data-animate="5"]').addClass("animated fadeInDown")},1e3),t(function(){a.find('*[data-animate="6"]').addClass("animated fadeInDown")},1200),t(function(){a.find('*[data-animate="7"]').addClass("animated fadeIn")},1400),t(function(){a.find('*[data-animate="8"]').addClass("animated fadeIn")},1600)},{offset:"0%"}),$("#passported-intro").waypoint(function(){var a=$(this);t(function(){a.find('*[data-animate="1"]').addClass("animated fadeInUp")},200),t(function(){a.find('*[data-animate="2"]').addClass("animated fadeInUp")},400),t(function(){a.find('*[data-animate="3"]').addClass("animated fadeInUp")},600),t(function(){a.find('*[data-animate="4"]').addClass("animated fadeInUp")},800),t(function(){a.find('*[data-animate="5"]').addClass("animated fadeInUp")},1e3),t(function(){a.find('*[data-animate="6"]').addClass("animated fadeInUp")},1200),t(function(){a.find('*[data-animate="7"]').addClass("animated fadeInUp")},1400)},{offset:"0%"}),$("#inspiration").waypoint(function(){var a=$(this);t(function(){a.find('*[data-animate="1"]').addClass("animated fadeIn")},200),t(function(){a.find('*[data-animate="2"]').addClass("animated fadeIn")},600)},{offset:"75%"}),$("#inspiration").waypoint(function(){},{offset:"90px"}),$("#how-it-works").waypoint(function(){var a=$(this);t(function(){a.find('*[data-animate="1"]').addClass("animated fadeInUp")},200),t(function(){a.find('*[data-animate="2"]').addClass("animated fadeIn")},400),t(function(){a.find('*[data-animate="3"]').addClass("animated fadeIn")},600),t(function(){a.find('*[data-animate="4"]').addClass("animated fadeIn")},800),t(function(){a.find('*[data-animate="5"]').addClass("animated fadeIn")},1e3),t(function(){a.find('*[data-animate="6"]').addClass("animated fadeIn")},1200),t(function(){a.find('*[data-animate="7"]').addClass("animated fadeIn")},1400),t(function(){a.find('*[data-animate="8"]').addClass("animated fadeIn")},1600),t(function(){a.find('*[data-animate="9"]').addClass("animated fadeIn")},1800),t(function(){a.find('*[data-animate="10"]').addClass("animated fadeIn")},2e3)},{offset:"50%"}),$("#map").waypoint(function(){var a=$(this);n.info("The map is visible now"),o("map"),t(function(){a.find('*[data-animate="1"]').addClass("animated fadeIn")},200),t(function(){a.find('*[data-animate="2"]').addClass("animated fadeInLeft")},400),t(function(){a.find('*[data-animate="3"]').addClass("animated fadeInRight")},600)},{offset:"30%"}),$("#travel-journal").waypoint(function(){var a=$(this);n.info("The blog is visible now"),o("travel-journal"),t(function(){a.find('*[data-animate="1"]').addClass("animated fadeInUp")},200),t(function(){a.find('*[data-animate="2"]').addClass("animated fadeIn")},400),t(function(){a.find('*[data-animate="3"]').addClass("animated fadeIn")},600),t(function(){a.find('*[data-animate="4"]').addClass("animated fadeIn")},800),t(function(){a.find('*[data-animate="5"]').addClass("animated fadeIn")},1e3),t(function(){a.find('*[data-animate="6"]').addClass("animated fadeIn")},1200),t(function(){a.find('*[data-animate="7"]').addClass("animated fadeIn")},1400),t(function(){a.find('*[data-animate="8"]').addClass("animated fadeIn")},1600),t(function(){a.find('*[data-animate="9"]').addClass("animated fadeIn")},1800)},{offset:"75%"}),$("#press").waypoint(function(){var a=$(this);n.info("The press block is visible now"),o("press"),t(function(){a.find('*[data-animate="1"]').addClass("animated fadeInDown")},200),t(function(){a.find('*[data-animate="2"]').addClass("animated fadeInDown")},400),t(function(){a.find('*[data-animate="3"]').addClass("animated fadeInDown")},600),t(function(){a.find('*[data-animate="4"]').addClass("animated fadeInDown")},800),t(function(){a.find('*[data-animate="5"]').addClass("animated fadeInDown")},1e3),t(function(){a.find('*[data-animate="6"]').addClass("animated fadeInDown")},1200),t(function(){a.find('*[data-animate="7"]').addClass("animated fadeInDown")},1400),t(function(){a.find('*[data-animate="8"]').addClass("animated fadeInDown")},1600)},{offset:"75%"}),$("body > footer").waypoint(function(){var a=$(this);n.info("The footer is visible now"),t(function(){a.find('*[data-animate="1"]').addClass("animated fadeInDown")},200)},{offset:"75%"})},d=function(){var a=$("div.dropdown-wrapper"),n=a.find("div.arrow"),e=$("#city-guides-list"),o=$("#search-block"),i=300,d=$(window).height()-90,s=!1,r=function(){t(function(){a.find('*[data-animate="1"]').addClass("animated fadeInUp")},200),t(function(){a.find('*[data-animate="2"]').addClass("animated fadeInUp")},400),t(function(){a.find('*[data-animate="3"]').addClass("animated fadeInUp")},600),t(function(){a.find('*[data-animate="4"]').addClass("animated fadeInUp")},800)},f=function(){};$("div.dropdown-wrapper").on({mouseover:function(){s=!0}}),$("header > nav a.subnav").on({mouseover:function(){var t=$(this).offset().left+30-10+$(this).width()/2,r;switch(s=!0,$(this).attr("id")){case"city-guides":a.removeClass("light"),r="city-guides";break;case"search":a.addClass("light"),r="search"}setTimeout(function(){s&&(n.css({left:t+"px"}).addClass("on"),"city-guides"==r&&(a.show().transition({height:d+"px"}),e.show().transition({opacity:1}),o.hide()),"search"==r&&(a.show().transition({height:"260px"}),o.show().transition({opacity:1}),e.hide()))},i)}}),$("header > nav a.subnav, div.dropdown-wrapper").on({mouseout:function(){s=!1,setTimeout(function(){s||(n.removeClass("on"),a.transition({height:0},function(){a.hide()}),e.transition({opacity:0},function(){e.hide()}),o.transition({opacity:0},function(){o.hide()}))},i)}})},s=function(){$("body").imagesLoaded().always(function(a){$("body").transit({opacity:1},function(){i(),d()})})};a.state=e.path().replace("/",""),a.goTo=function(n){a.state=n,e.path(n)},t(function(){s()},200)}),ppControllers.controller("MapController",function(a,n,t){a.map,a.lat=40.777422,a.lon=-73.968887;var e="passported",o=function(){$("#map").css({height:$(window).height()-90+"px"})},i=function(){var n={zoom:10,center:new google.maps.LatLng(a.lat,a.lon),panControl:!0,zoomControl:!0,mapTypeControl:!1,scrollwheel:!1,scaleControl:!0,streetViewControl:!0,overviewMapControl:!1,panControl:!1,panControlOptions:{position:google.maps.ControlPosition.TOP_RIGHT},zoomControlOptions:{style:google.maps.ZoomControlStyle.SMALL,position:google.maps.ControlPosition.RIGHT_TOP},mapTypeControlOptions:{mapTypeIds:[google.maps.MapTypeId.ROADMAP,e]},mapTypeId:e},t=[{stylers:[{hue:"#D8DCDB"},{visibility:"simplified"},{gamma:0},{weight:.5}]},{elementType:"labels",stylers:[{visibility:"on"},{color:"#AAAAAA"}]},{featureType:"water",stylers:[{color:"#BBCAD0"}]},{featureType:"road",stylers:[{color:"#D8DCDB"}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#D8DCDB"}]},{featureType:"landscape",elementType:"geometry",stylers:[{color:"#F0F2F1"}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#F0F2F1"}]}],o={name:"Passported"};a.map=new google.maps.Map(document.getElementById("google-maps-container"),n),a.map.mapTypes.set(e,new google.maps.StyledMapType(t,o))};a.addMarkers=function(n,t){var e="/sites/all/themes/passported/media/icons/";switch(n){case"destinations":console.log(t),_.map(t,function(n){var t=new google.maps.Marker({position:{lat:Number(n.lat),lng:Number(n.lon)},map:a.map,title:n.name,icon:e+"map-pin-icon.svg"});t.addListener("click",function(){a.map.setZoom(15),a.map.setCenter(t.getPosition())})});break;case"guide":var o=0==t.zoom_level.length?12:Number(t.zoom_level),i=0==t.addressbook_reference.length?[t.lat,t.lon]:[t.addressbook_reference.lat,t.addressbook_reference.lon],d=[t.guide,t.hotels];_.map(d,function(n){_.map(n,function(n){console.log(n);var t=new google.maps.Marker({position:{lat:Number(n.lat),lng:Number(n.lon)},map:a.map,title:n.title,icon:e+"map-pin-icon.svg"}),o=new google.maps.InfoWindow({content:'<div class="in-map"><h1>'+n.title+"</h1><h2>"+n.short_review+"</h2></div>",maxWidth:200});t.addListener("click",function(){a.map.setZoom(16),a.map.setCenter(t.getPosition()),o.open(a.map,t)})})}),a.map.setCenter(new google.maps.LatLng(Number(i[0]),Number(i[1]))),a.map.setZoom(o)}},t(function(){o(),i()},0),$(window).on("resize",function(){o()})}),ppControllers.controller("ItineraryController",function(a,n,t,e,o){var i=e("https://www.passported.com/api/content/destinations.json"),d=e("https://www.passported.com/api/content/address-books.json"),s=e("https://www.passported.com/api/content/hotels.json"),r=e("https://gostage.passported.com/api/v2/location");a.cityGuideID,a.step=_.isUndefined(a.cityGuideID)?1:2,a.showAside=!0,a.pick,a.check={phone:function(a){return _.isArray(a)},features:function(a){return _.isArray(a)},icon:function(a){var n=a.toLowerCase();switch(n){case"basics":case"bedtime":n="icon-passported-imago";break;case"do":case"shop":case"eat":case"noteworthy":n="icon-passported-imago"}return n}},a.openAside=function(){a.showAside=!a.showAside},a.goTo=function(n){a.step=n},a.displayDestination=function(n){a.pick=n,("stage.passported.com"==window.location.host||"www.passported.com"==window.location.host)&&r.query({name:n.name.replace(" ","+")},function(a){console.log(a)}),d.query({destination:n.id},function(t){a.pick.guide=t,s.query({destination:n.id},function(t){a.pick.hotels=t,a.$parent.addMarkers("guide",n),console.log(a.pick)})}),a.step=2,$("#step-2").delay(2e3).transition({opacity:1},"slow")},_.isUndefined(a.cityGuideID)?a.destinations=i.query({},function(n){a.$parent.addMarkers("destinations",n)}):a.pick=i.query({id:a.cityGuideID},function(n){a.displayDestination(n[0])}),a.book=function(a){o.$emit("open-booking",[a])},o.$on("filter",function(a){})}),ppControllers.controller("BookingController",function(a,n,t,e,o){var i={formID:"bookHotel",destination:"",hotel:"",name:void 0,last:void 0,email:void 0,start_date:void 0,end_date:void 0,adults:0,children:0,budget:void 0,specific_budget:void 0,message:void 0};a.showRightAside=!1,a.booking=angular.copy(i),a.openAside=function(){a.showRightAside=!a.showRightAside,a.showRightAside||(a.booking=angular.copy(i))},a.setter={checkButtons:function(){$("*.budget-check").on("click",function(){$(this).find("span").toggleClass("on")})},date:function(){},budget:function(n){a.booking.budget=n}},a.submit=function(){console.log(a.booking),$("aside.right #step-1 ul li").transition({opacity:0},function(){$(this).hide()}),e({method:"POST",url:formSubmit,data:$.param(a.booking),headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:angular.identity}).success(function(a){console.log(a),$("#booking-message").show().transition({opacity:1})}).error(function(){})},o.$on("open-booking",function(n,t){a.showRightAside=!0,a.booking.destination=t[0].destination,a.booking.hotel=t[0].name,console.log(t[0])}),t(function(){a.setter.checkButtons()},0)}),ppControllers.controller("BlogController",function(a,n,t){var e=$(".grid-wrapper"),o=$("*.quick-entry").toArray();t(function(){},0)}),ppControllers.controller("PromotedController",function(a,n,t,e){}),ppControllers.controller("NewsletterController",function(a,n,t){var e="",o=["still","success","error"];a.currentStatus=o[0],a.signUpData={userEmail:""},a.checkChangedInput=function(n){var t=function(a,n){var t=$('*[name$="-'+a.split("user")[1].toLowerCase()+'"]'),e="warning";n?t.addClass(e):t.removeClass(e)};angular.forEach(a.data,function(a,n){t(n,angular.isUndefined(a))})},a.regSubmit=function(){""!=a.signUpData.userEmail&&$http({method:"POST",url:formSubmit,data:$.param({formID:"newsletterForm",userEmail:a.signUpData.userEmail}),headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:angular.identity}).success(function(n){a.currentStatus=o[1]}).error(function(){a.currentStatus=o[2]})}}),ppControllers.controller("SearchController",function(a,n,t){}),ppControllers.controller("ContactController",function(a,n){a.data={userName:"",userLast:"",userEmail:"",userDepartment:"",userSubject:"",userMessage:""},a.success=!1,a.submitContact=function(){var t={formID:"contact",firstName:a.data.userName,lastName:a.data.userLast,email:a.data.userEmail,department:a.data.userDepartment,subject:a.data.userSubject,message:a.data.userMessage};n({method:"POST",url:formSubmit,data:$.param(t),headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:angular.identity}).success(function(n){$("#contact-form").transition({opacity:0},function(){a.success=!0,a.$apply()})}).error(function(){})}});